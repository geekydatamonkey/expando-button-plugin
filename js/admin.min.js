/**
* admin.js
* Scripts for the Admin Side of the Expando Button Widget
**/(function(e,t,n,r){var i=function(){var t=wp.media.model.Attachment,n,r,i;i={frame:function(){if(this._frame)return this._frame;this._frame=wp.media({title:"Choose an image",library:{type:"image"},button:{text:"Update Image"},multiple:!1});this._frame.on("open",this.updateLibrarySelection).state("library").on("select",this.select);return this._frame},select:function(){var e=this.get("selection"),t=n.data("return-property")||"url";if(r.length){console.log(r);r.val(e.pluck(t));r.attr("data-imgID",e.pluck("id"))}n.trigger("selectionChange.simpleimagewidget",[e])},updateLibrarySelection:function(){var e=this.get("library").get("selection"),n,i;console.log(e);if(r.length){i=r.val();if(i&&""!==i&&-1!==i&&"0"!==i){n=t.get(i);n.fetch()}}e.reset(n?[n]:[])},init:function(){e("#wpbody").on("click",".expando-button-uploader .img-upload-button",function(t){var s;t.preventDefault();n=e(this).closest(".expando-button-uploader");s=".img-url";0===s.indexOf("#")?r=e(s):r=n.find(s);i.frame().open()})}};i.init()};e(n).ready(function(){i()})})(window.jQuery,window,document);